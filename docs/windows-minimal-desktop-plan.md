# Windows Minimal Desktop App Plan (Kanban UI)

## Goal
Ship your existing Kanban UI as a lightweight **Windows desktop app** with minimal rewrite, local data storage, and an installable `.msi`/`.exe` produced by compilation.

## Recommended stack (minimal overhead)
- **Tauri v2** shell (Rust + WebView2) for native desktop packaging.
- Keep your existing **React + Vite + TypeScript** frontend as-is.
- Use **Tauri filesystem/dialog APIs** for import/export and persistent local save.

Why this fits your current UI:
- Your board is already client-side state driven (`cards`, filters, drawer/dialog interactions).
- You already support import/export JSON, so persistence can start simple.
- Drag-and-drop and keyboard shortcuts stay in the React layer.

## Current UI capabilities to preserve in desktop
1. Board shell with editable board name, quick-add input, search, import/export actions.
2. Four fixed Kanban columns: Not Started, In Progress, Blocked, Done.
3. Drag-and-drop card movement across columns.
4. Card detail drawer + quick add dialog.
5. Filter bar for blocked/priority/tags and live metrics.

## Delivery phases

### Phase 1 — Wrap existing app in Tauri (1 day)
- Initialize Tauri in this repository.
- Keep frontend build output from Vite.
- Create first Windows debug build and verify app launches.

**Exit criteria**
- `npm run tauri dev` opens desktop window with current Kanban UI.

### Phase 2 — Local persistence (1 day)
- Replace in-memory-only behavior with startup/load + save-on-change.
- Save board data to `%AppData%/<your-app>/board.json` (via Tauri APIs).
- Keep existing manual import/export as backup.

**Exit criteria**
- Cards persist after app close/reopen.

### Phase 3 — Desktop polish (0.5–1 day)
- Define app name, icon, version, window defaults.
- Add command shortcuts (Ctrl+N quick add, Ctrl+F search, etc.) if desired.
- Keep binary lightweight by avoiding heavy native plugins early.

**Exit criteria**
- Feels native, no web dev UI artifacts.

### Phase 4 — Installer build for Windows (0.5 day)
- Build signed/unsigned installer from CI or local machine.
- Produce `.msi` (and optional `.exe` updater bundle).

**Exit criteria**
- Shareable installer produced from compilation process.

## Concrete implementation checklist

### A) Bootstrap desktop container
1. Add Tauri dependencies and scaffold:
   - `npm install -D @tauri-apps/cli`
   - `npm install @tauri-apps/api`
   - `npx tauri init`
2. Configure Tauri to point to Vite dev server and build output.
3. Add scripts:
   - `tauri:dev`
   - `tauri:build`

### B) Minimal data model persistence
Use your existing card schema as the persisted format:
- `boardName`
- `cards[]`
- Optional future: `lastOpenedAt`, `schemaVersion`

Implement:
- `loadBoard()` on app start.
- `saveBoard()` when `cards` or `boardName` changes (debounced).
- Fallback to existing `mockCards` on first run or corrupted file.

### C) Replace browser-specific file handling incrementally
Current implementation uses browser primitives (`Blob`, hidden `<input type=file>`).
For desktop:
- Keep current logic initially (works in webview).
- Later switch to Tauri dialog/file APIs for native picker + write/read behavior.

### D) Build pipeline for installable Windows app
1. Install prerequisites on build machine:
   - Rust toolchain
   - Microsoft C++ Build Tools
   - WebView2 runtime (usually present on Windows 11)
2. Run:
   - `npm run tauri build`
3. Collect artifacts from `src-tauri/target/release/bundle/`.

## Suggested project structure additions
- `src/desktop/` for desktop-only adapters (`storage.ts`, `fileDialogs.ts`)
- `src-tauri/` generated by Tauri
- `docs/windows-minimal-desktop-plan.md` (this plan)

## Risks and mitigations
- **Risk:** Web-only APIs behave differently in desktop webview.
  - **Mitigation:** Isolate filesystem and dialogs behind adapter functions.
- **Risk:** Data loss from abrupt app close.
  - **Mitigation:** Debounced auto-save + pre-close flush.
- **Risk:** Build complexity on Windows machines.
  - **Mitigation:** Use a CI workflow that outputs installer artifacts.

## Minimal milestone definition (MVP)
Your MVP desktop app is complete when:
- Launches as a native window on Windows.
- Can add/edit/move/delete cards.
- Saves and restores board data between sessions.
- Exports/imports JSON.
- Ships as installable `.msi` generated by `tauri build`.
